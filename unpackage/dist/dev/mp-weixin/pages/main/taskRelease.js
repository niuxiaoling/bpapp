require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([6],{92:function(t,e,a){"use strict";var s=o(a(0)),i=o(a(93));function o(t){return t&&t.__esModule?t:{default:t}}new s.default(i.default).$mount()},93:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(95),i=a.n(s),o=a(96),n=!1;var r=function(t){n||a(94)},l=a(1)(i.a,o.a,r,null,null);l.options.__file="E:\\其他项目\\bpapp\\pages\\main\\taskRelease.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] taskRelease.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},94:function(t,e){},95:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{count:2,imageList:[],picId:[],taskData:{taskTitle:"",copyWriting:"",contributionNo:"",releaseTaskNo:"",allMoney:"",picId:"",picId2:""},taskIdentifier:"",vipLevel:"",userInfo:{}}},onUnload:function(){this.imageList=[]},onLoad:function(){this.vipLevel=t.getStorageSync("vipLevel")?t.getStorageSync("vipLevel"):"",this.userInfo=t.getStorageSync("userInfo")},methods:{publishTask:function(){var e=this;this.taskData.allMoney=Number(this.taskData.contributionNo)*Number(this.taskData.releaseTaskNo),this.taskData.picId=this.picId[0],this.taskData.picId2=this.picId[1],console.log(this.taskData,this.picId),this.taskData.account=this.userInfo.account;var a={taskInfo:this.taskData,requestType:"creatTask"},s={controllerRequestType:"taskControllerService",jsonString:JSON.stringify(a)};t.request({url:e.websiteUrl,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:s,success:function(a){"0000"==a.data.errorCode&&("04"==a.data.taskInfo.statusTask?(console.log(a.data),e.taskIdentifier=a.data.taskInfo.taskIdentifier,t.showModal({content:"自由任务暂未开发！"})):t.showModal({content:"勇士任务发布成功"}))},fail:function(t){console.log(JSON.stringify(t))}})},totalPrice:function(){this.taskData.allMoney=Number(this.taskData.contributionNo)*Number(this.taskData.releaseTaskNo)},urlTobase64:function(e){var a=this;t.request({url:e,method:"GET",responseType:"arraybuffer",success:function(t){a.base64=wx.arrayBufferToBase64(t.data),a.base64="data:image/jpeg;base64,"+a.base64}})},chooseImg:function(){var e=this;t.chooseImage({sourceType:["camera","album"],sizeType:"compressed",count:e.count-e.imageList.length,success:function(a){if(t.request({url:a.tempFilePaths[0],method:"GET",responseType:"arraybuffer",success:function(a){var s={taskInfo:{picBast64:wx.arrayBufferToBase64(a.data),upType:"pic"},requestType:"upFile"},i={controllerRequestType:"taskControllerService",jsonString:JSON.stringify(s)};t.request({url:e.websiteUrl,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:i,success:function(t){"0000"==t.data.errorCode&&e.picId.push(t.data.taskInfo.picId)},fail:function(t){console.log(JSON.stringify(t))}})}}),e.imageList.length>0){var s=function(t){-1===e.imageList.findIndex(function(e){return e===t})&&e.imageList.push(t)},i=!0,o=!1,n=void 0;try{for(var r,l=a.tempFilePaths[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){s(r.value)}}catch(t){o=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw n}}}else e.imageList=a.tempFilePaths;e.$emit("change",e.imageList)}})},removeImage:function(e){var a=this;t.showModal({content:"确认删除选中的图片？",success:function(){var t=a.imageList.findIndex(function(t){return t===e});a.imageList.splice(t,1)}})},previewImage:function(){t.previewImage({urls:this.imageList})}}}}).call(e,a(2).default)},96:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"taskView"},[a("view",{staticClass:"taskTitle"},[a("text",[t._v("标题：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.taskTitle,expression:"taskData.taskTitle"}],staticClass:"title",attrs:{type:"text",placeholder:"请输入标题(最多6字符)",maxlength:"6",eventid:"Rch-0"},domProps:{value:t.taskData.taskTitle},on:{input:function(e){e.target.composing||(t.taskData.taskTitle=e.target.value)}}})]),a("view",{staticClass:"taskContent"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskData.copyWriting,expression:"taskData.copyWriting"}],staticClass:"contentText",attrs:{placeholder:"请输入广告内容(最多150字符)",maxlength:"150",eventid:"uvW-1"},domProps:{value:t.taskData.copyWriting},on:{input:function(e){e.target.composing||(t.taskData.copyWriting=e.target.value)}}}),a("view",{staticClass:"contentImg"},[a("view",{staticClass:"ts-uploader"},[a("view",{staticClass:"ts-uploader-body"},[a("view",{staticClass:"ts-uploader__files"},[t._l(t.imageList,function(e,s){return a("block",{key:s},[a("view",{staticClass:"ts-uploader__file"},[a("image",{staticClass:"ts-uploader__img",attrs:{src:e,eventid:"gdG-2-"+s},on:{tap:t.previewImage,longpress:function(a){t.removeImage(e)}}})])])}),t.imageList.length<t.count?a("view",{staticClass:"ts-uploader__input-box"},[a("view",{staticClass:"ts-uploader-info ts-h5"},[t._v(t._s(t.imageList.length)+"/"+t._s(t.count))]),a("view",{staticClass:"ts-uploader__input",attrs:{eventid:"uul-3"},on:{tap:t.chooseImg}})]):t._e()],2)])])])]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("单笔广告费：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.contributionNo,expression:"taskData.contributionNo"}],attrs:{type:"number",maxlength:"5",eventid:"JTW-4"},domProps:{value:t.taskData.contributionNo},on:{input:function(e){e.target.composing||(t.taskData.contributionNo=e.target.value)}}})]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("任务发布数量：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.releaseTaskNo,expression:"taskData.releaseTaskNo"}],attrs:{type:"number",maxlength:"5",eventid:"885-5"},domProps:{value:t.taskData.releaseTaskNo},on:{input:function(e){e.target.composing||(t.taskData.releaseTaskNo=e.target.value)}}})]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("广告总价：")]),a("text",[t._v(t._s(t.taskData.allMoney))])]),a("view",{staticClass:"submitPrice"},[a("button",{staticClass:"taskGo",attrs:{eventid:"Gwv-6"},on:{click:t.publishTask}},[t._v("发布任务")])],1)])};s._withStripped=!0;var i={render:s,staticRenderFns:[]};e.a=i}},[92]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/main/taskRelease.js.map