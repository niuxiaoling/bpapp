require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([6],{88:function(t,e,a){"use strict";var s=o(a(1)),i=o(a(89));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},89:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(91),i=a.n(s),o=a(92),n=!1;var r=function(t){n||a(90)},l=a(0)(i.a,o.a,r,null,null);l.options.__file="C:\\Users\\Administrator\\Desktop\\WEIPIN\\bpapp\\pages\\main\\taskRelease.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] taskRelease.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},90:function(t,e){},91:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{count:2,imageList:[],picId:[],taskData:{taskTitle:"",copyWriting:"",contributionNo:"",releaseTaskNo:"",allMoney:"",picId:"",picId2:""},taskIdentifier:"",vipLevel:"",userInfo:{}}},onUnload:function(){this.imageList=[]},onLoad:function(){this.vipLevel=t.getStorageSync("vipLevel")?t.getStorageSync("vipLevel"):"",this.userInfo=t.getStorageSync("userInfo")},methods:{testNumber:function(){this.taskData.contributionNo=this.taskData.contributionNo.replace(/[^\.\d]/g,""),this.taskData.contributionNo=this.taskData.contributionNo.replace(".","")},testNumber2:function(){this.taskData.releaseTaskNo=this.taskData.releaseTaskNo.replace(/[^\.\d]/g,""),this.taskData.releaseTaskNo=this.taskData.releaseTaskNo.replace(".","")},publishTask:function(){var e=this;if(this.taskData.allMoney=Number(this.taskData.contributionNo)*Number(this.taskData.releaseTaskNo),this.taskData.picId=this.picId[0],this.taskData.picId2=this.picId[1],this.taskData.account=this.userInfo.account,""==this.taskData.contributionNo||Number(this.taskData.contributionNo)<1)t.showToast({icon:"none",title:"单笔广告费用不能少于1"});else if(""==this.taskData.releaseTaskNo||Number(this.taskData.releaseTaskNo)<1)t.showToast({icon:"none",title:"广告数量至少为1"});else{var a={taskInfo:this.taskData,requestType:"creatTask"},s={controllerRequestType:"taskControllerService",jsonString:JSON.stringify(a)};t.request({url:e.websiteUrl,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:s,success:function(a){"0000"==a.data.errorCode?"04"==a.data.taskInfo.statusTask?(console.log(a),console.log("间隔符"),console.log(a.data),e.taskIdentifier=a.data.taskInfo.taskIdentifier,t.showModal({title:"微品提示",content:"确定支付"+a.data.taskInfo.allMoney+"发布自由任务",success:function(e){e.confirm?t.navigateTo({url:"../MoneyWay/request-payment?money=0.01&payTradeType="+a.data.taskInfo.taskIdentifier}):e.cancel&&t.reLaunch({url:"../main/main"})}})):t.showModal({content:"勇士任务发布成功",success:function(e){t.reLaunch({url:"../main/main"})}}):t.showToast({icon:"none",title:a.data.errorMessage})},fail:function(e){t.showToast({icon:"none",title:"网络异常，请重试"}),console.log(JSON.stringify(e))}})}},totalPrice:function(){this.taskData.allMoney=Number(this.taskData.contributionNo)*Number(this.taskData.releaseTaskNo)},urlTobase64:function(e){var a=this;t.request({url:e,method:"GET",responseType:"arraybuffer",success:function(t){a.base64=wx.arrayBufferToBase64(t.data),a.base64="data:image/jpeg;base64,"+a.base64}})},chooseImg:function(){var e=this;t.chooseImage({sourceType:["camera","album"],sizeType:"compressed",count:e.count-e.imageList.length,success:function(a){if(console.log(JSON.stringify(a.tempFilePaths)),t.request({url:a.tempFilePaths[0],method:"GET",responseType:"arraybuffer",success:function(a){var s={taskInfo:{picBast64:wx.arrayBufferToBase64(a.data),upType:"pic"},requestType:"upFile"},i={controllerRequestType:"taskControllerService",jsonString:JSON.stringify(s)};t.request({url:e.websiteUrl,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:i,success:function(t){"0000"==t.data.errorCode&&(console.log("chenggong"),e.picId.push(t.data.taskInfo.picId))},fail:function(t){console.log(JSON.stringify(t))}})}}),e.imageList.length>0){var s=function(t){-1===e.imageList.findIndex(function(e){return e===t})&&e.imageList.push(t)},i=!0,o=!1,n=void 0;try{for(var r,l=a.tempFilePaths[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){s(r.value)}}catch(t){o=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw n}}}else e.imageList=a.tempFilePaths;e.$emit("change",e.imageList)}})},removeImage:function(e){var a=this;t.showModal({content:"确认删除选中的图片？",success:function(){var t=a.imageList.findIndex(function(t){return t===e});a.imageList.splice(t,1)}})},previewImage:function(){t.previewImage({urls:this.imageList})}}}}).call(e,a(2).default)},92:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"taskView"},[a("view",{staticClass:"taskTitle"},[a("text",[t._v("标题：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.taskTitle,expression:"taskData.taskTitle"}],staticClass:"title",attrs:{type:"text",placeholder:"请输入标题(最多6字符)",maxlength:"6",eventid:"mag-0"},domProps:{value:t.taskData.taskTitle},on:{input:function(e){e.target.composing||(t.taskData.taskTitle=e.target.value)}}})]),a("view",{staticClass:"taskContent"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.taskData.copyWriting,expression:"taskData.copyWriting"}],staticClass:"contentText",attrs:{placeholder:"请输入广告内容(最多150字符)",maxlength:"150",eventid:"kid-1"},domProps:{value:t.taskData.copyWriting},on:{input:function(e){e.target.composing||(t.taskData.copyWriting=e.target.value)}}}),a("view",{staticClass:"contentImg"},[a("view",{staticClass:"ts-uploader"},[a("view",{staticClass:"ts-uploader-body"},[a("view",{staticClass:"ts-uploader__files"},[t._l(t.imageList,function(e,s){return a("block",{key:s},[a("view",{staticClass:"ts-uploader__file"},[a("image",{staticClass:"ts-uploader__img",attrs:{src:e,eventid:"OOu-2-"+s},on:{tap:t.previewImage,longpress:function(a){t.removeImage(e)}}})])])}),t.imageList.length<t.count?a("view",{staticClass:"ts-uploader__input-box"},[a("view",{staticClass:"ts-uploader-info ts-h5"},[t._v(t._s(t.imageList.length)+"/"+t._s(t.count))]),a("view",{staticClass:"ts-uploader__input",attrs:{eventid:"yfw-3"},on:{tap:t.chooseImg}})]):t._e()],2)])])])]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("单笔广告费：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.contributionNo,expression:"taskData.contributionNo"}],attrs:{type:"number",maxlength:"5",eventid:"AwG-4"},domProps:{value:t.taskData.contributionNo},on:{blur:t.testNumber,input:function(e){e.target.composing||(t.taskData.contributionNo=e.target.value)}}})]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("任务发布数量：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.taskData.releaseTaskNo,expression:"taskData.releaseTaskNo"}],attrs:{type:"number",maxlength:"5",eventid:"C8O-5"},domProps:{value:t.taskData.releaseTaskNo},on:{blur:t.testNumber2,input:function(e){e.target.composing||(t.taskData.releaseTaskNo=e.target.value)}}})]),a("view",{staticClass:"taskTitles"},[a("text",[t._v("广告总价：")]),a("text",[t._v(t._s(t.taskData.allMoney))])]),a("view",{staticClass:"submitPrice"},[a("button",{staticClass:"taskGo",attrs:{eventid:"226-6"},on:{click:t.publishTask}},[t._v("发布任务")])],1)])};s._withStripped=!0;var i={render:s,staticRenderFns:[]};e.a=i}},[88]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/main/taskRelease.js.map